<?xml version="1.0" encoding="utf-8"?>
<!-- vim:fdn=3:
-->
<odoo>
    <data>

        <template id="assets_backend" name="stock assets" inherit_id="web.assets_backend">
            <xpath expr="." position="inside">
                <script type="text/javascript" src="/web_ui_stock/static/src/lib/jquery.toast.min.js"/>
                <script type="text/javascript" src="/web_ui_stock/static/src/js/packing_mobile_widgets.js"></script>
                <script type="text/javascript" src="/web_ui_stock/static/src/js/web_stock_ui_barecode_scanner.js"></script>
                <script type="text/javascript" src="/web_ui_stock/static/src/js/web_ui_stock_numpad.js"></script>
            </xpath>
        </template>

        <template id="index" name="Stock Picking Barcode">
            &lt;!DOCTYPE html&gt;
            <html>
                <head>
                    <title>Stock Picking Barcode</title>

                    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
                    <meta http-equiv="content-type" content="text/html, charset=utf-8"/>

                    <meta name="viewport" content="width=device-width, initial-scale=1"/>
                    <meta name="apple-mobile-web-app-capable" content="yes"/>
                    <meta name="mobile-web-app-capable" content="yes"/>

                    <link rel="shortcut icon" sizes="80x51" href="/stock/static/src/img/scan.png"/>
                    <link rel="shortcut icon" href="/web/static/src/img/favicon.ico" type="image/x-icon"/>
                    <link rel="stylesheet" href="/web/static/lib/bootstrap/css/bootstrap.css"/>
                    <link rel="stylesheet" href="/web/static/lib/jquery.ui/jquery-ui.css"/>
                    <link rel="stylesheet" href="/web/static/lib/fontawesome/css/font-awesome.css"/>

                    <link rel="stylesheet" href="/web_ui_stock/static/src/css/ui_stock.css"/>
                    <link rel="stylesheet" href="/web_ui_stock/static/src/css/theme.css"/>
                    <link rel="stylesheet" href="/web_ui_stock/static/src/css/mini-bootstrap-4.css"/>
                    <link rel="stylesheet" href="/web_ui_stock/static/src/css/barcode.css"/>

                    <link rel="stylesheet" href="/web_ui_stock/static/src/lib/jquery.toast.min.css"/>

                    <t t-call-assets="web.assets_common" t-css="false"/>
                    <t t-call-assets="web.assets_backend" t-css="false"/>

                    <script type="text/javascript">
                        odoo.define('web.csrf', function (require) {
                        var token = "<t t-esc="request.csrf_token(None)"/>";
                        require('web.core').csrf_token = token;
                        require('qweb').default_dict.csrf_token = token;
                        });
                    </script>

                    <script type="text/javascript" id="loading-script" t-raw="init">
                        $(function() {
                        odoo.define('web.web_client', function (require) {
                        var WebClient = require('web.WebClient');
                        var web_client = new WebClient();
                        var pp = new URLSearchParams(window.location.search)
                        web_client.show_application = function() {
                        web_client.action_manager.do_action(pp.get("action"), {
                        picking_type_id:pp.get("picking_type_id"),
                        type:pp.get("type")
                        });
                        };

                        web_client.do_push_state = function(state){};

                        web_client.setElement($(document.body));
                        web_client.start();
                        return web_client;
                        });
                        });
                    </script>

                </head>
                <body>
                    <div class='openerp openerp_webclient_container'>
                        <div class='oe_webclient' style="width:100%;">
                            <div class='oe_application'/>
                        </div>
                    </div>
                </body>
            </html>
        </template>

        <record model="ir.ui.view" id="web_ui_stock_picking_type_kanban">
            <field name="name">web_ui_stock_picking_type_kanban</field>
            <field name="model">stock.picking.type</field>
            <field name="inherit_id" ref="stock.stock_picking_type_kanban"/>
            <field name="arch" type="xml">
                <field name="color" position="after">
                    <field name="web_action_id"/>
                </field>
                <xpath expr="//div[@class='o_kanban_card_header_title']" position="after">
                    <t- t-if="record.web_action_id.raw_value">
                        <a name="web_ui_launch_action" type="object" style="flex: 3 0 0px;padding: 8px 0;">
                            <img src="/web_ui_stock/static/src/img/scan.gif"
                                 style="width:80px; height:51px"
                                 alt="Click to launch the barcode interface"
                                 class="oe_stock_scan_image" title="Click to launch the barcode interface"/>
                        </a>
                    </t->
                </xpath>
            </field>
        </record>

        <record model="ir.ui.view" id="web_ui_view_picking_type_form">
            <field name="name">web_ui_view_picking_type_forms</field>
            <field name="model">stock.picking.type</field>
            <field name="inherit_id" ref="stock.view_picking_type_form"/>
            <field name="arch" type="xml">
                <field name="warehouse_id" position="after">
                    <field name="web_action_id"/>
                </field>
            </field>
        </record>
    </data>
</odoo>
