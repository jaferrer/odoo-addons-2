<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <!-- region sessions list -->
    <template id="portal_sessions_list" name="My sessions">
        <t t-call="portal.portal_layout">
            <t t-if="not sessions">
                <div class="alert alert-warning" role="alert">
                    No session available for your account.
                </div>
            </t>
            <t t-if="sessions" t-call="portal.portal_table">
                <thead>
                    <tr class="active">
                        <th>Session</th>
                        <th>Administrative Contact</th>
                    </tr>
                </thead>
                <tbody>
                    <tr t-foreach="sessions" t-as="session">
                        <td><a t-attf-href="/session/#{slug(session)}?{{ keep_query() }}"><span t-field="session.display_name"/></a></td>
                        <td><span t-field="session.administrative_contact"/></td>
                    </tr>
                </tbody>
            </t>
        </t>
    </template>
    <!-- endregion sessions list -->

    <!-- region : session record -->
    <template id="portal_session">
        <t t-call="portal.portal_layout">
            <h5 class="mt-3 mb-3">
                <small class="text-muted"></small><span t-field="session.display_name"/>
                <span class="float-right"></span>
            </h5>

            <!-- region : display sittings information -->
            <t t-if="not session.sitting_ids">
                <div class="alert alert-warning" role="alert">
                    No sitting available for your account.
                </div>
            </t>

            <t t-if="session.sitting_ids" t-call="portal.portal_table">
                <t t-set="classes">mt-3</t>
                <thead>
                    <tr class="active">
                        <th>Sitting</th>
                        <th>Date</th>
                        <th>Start</th>
                        <th>End</th>
                        <th>Location</th>
                        <th>Trainer</th>
                    </tr>
                </thead>
                <tbody>
                    <tr t-foreach="session.sitting_ids" t-as="sitting">
                        <td><a t-attf-href="/sitting/#{slug(sitting)}?{{ keep_query() }}"><span t-esc="sitting.display_name"/></a></td>
                        <td><t t-esc="datetime.datetime.strptime(str(sitting.date), '%Y-%m-%d').strftime('%d %b %Y')" /></td>
                        <td><t t-esc="sitting.start_hour" t-options="{'widget': 'float_time'}" /></td>
                        <td><t t-esc="sitting.end_hour" t-options="{'widget': 'float_time'}" /></td>
                        <td>
                            <t t-if="sitting.location_id.display_name" t-esc="sitting.location_id.display_name" />
                            <t t-else="">Not available</t>
                        </td>
                        <td><t t-esc="', '.join([trainer.display_name for trainer in sitting.trainer_ids])" /></td>
                    </tr>
                </tbody>
            </t>
            <!-- endregion : display sittings information -->
        </t>
    </template>
    <!-- endregion : session record -->
</odoo>