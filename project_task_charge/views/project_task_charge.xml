<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <record id="project_task_charge_tree" model="ir.ui.view">
            <field name="name">project_task_charge_tree</field>
            <field name="model">project.task.charge</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="date"/>
                    <field name="user_id"/>
                    <field name="project_id"/>
                    <field name="task_id"/>
                    <field name="stage_id"/>
                    <field name="duration_per_day"/>
                    <field name="planned_hours"/>
                    <field name="duration"/>
                    <field name="date_start"/>
                    <field name="date_end"/>
                </tree>
            </field>
        </record>

        <record id="project_task_charge_form" model="ir.ui.view">
            <field name="name">project_task_charge_tree</field>
            <field name="model">project.task.charge</field>
            <field name="arch" type="xml">
                <form>
                    <group>
                        <group>
                            <field name="date"/>
                            <field name="user_id"/>
                            <field name="project_id"/>
                            <field name="task_id"/>
                            <field name="stage_id"/>
                        </group>
                        <group>
                            <field name="duration_per_day"/>
                            <field name="planned_hours"/>
                            <field name="duration"/>
                            <field name="date_start"/>
                            <field name="date_end"/>
                        </group>
                    </group>

                </form>
            </field>
        </record>

        <record id="project_task_charge_calendar" model="ir.ui.view">
            <field name="name">project_task_charge_calendar</field>
            <field name="model">project.task.charge</field>
            <field name="arch" type="xml">
                <calendar date_start="date" color="user_id" date_delay="duration_per_day">
                    <field name="project_id"/>
                    <field name="task_id"/>
                    <field name="stage_id"/>
                    <field name="user_id"/>
                    <field name="duration_per_day"/>
                </calendar>
            </field>
        </record>

        <record id="project_task_charge_timeline" model="ir.ui.view">
            <field name="name">project_task_charge_timeline</field>
            <field name="model">project.task.charge</field>
            <field name="arch" type="xml">
                <timeline date_start="date"
                          date_delay="duration"
                          mode="week"
                          default_group_by="user_id"
                          event_open_popup="true"
                          exclude_hours="8-18"
                          min_zoom="1440"
                          colors="#fff939: task_id == False; #ec7063: user_id == False;"
                />
            </field>
        </record>

        <record id="project_task_charge_pivot" model="ir.ui.view">
            <field name="name">project_task_charge_pivot</field>
            <field name="model">project.task.charge</field>
            <field name="arch" type="xml">
                <pivot string="Task charge" disable_linking="True">
                    <field name="user_id" type="col"/>
                    <field name="date" type="row" interval="day"/>
                    <field name="duration_per_day" type="measure"/>
                    <field name="duration" type="measure"/>
                    <field name="planned_hours" type="measure"/>
                </pivot>
            </field>
        </record>

        <record id="project_task_charge_graph" model="ir.ui.view">
            <field name="name">project_task_charge_graph</field>
            <field name="model">project.task.charge</field>
            <field name="arch" type="xml">
                <graph type="bar" orientation="horizontal">
                    <field name="date" type="col" interval="week"/>
                    <field name="user_id" type="row"/>
                    <field name="duration_per_day" type="measure"/>
                </graph>
            </field>
        </record>

         <record id="project_task_charge_search" model="ir.ui.view">
            <field name="name">project_task_charge_search</field>
            <field name="model">project.task.charge</field>
            <field name="arch" type="xml">
                <search>
                    <field name="date"/>
                    <field name="user_id"/>
                    <field name="task_id"/>
                    <field name="project_id"/>
                    <field name="stage_id"/>
                    <field name="duration_per_day"/>
                    <group expand="1" string="Group By">
                        <filter name="groupby_day" context="{'group_by':'date:day'}" string="Day" />
                        <filter name="groupby_week" context="{'group_by':'date:week'}" string="Week" />
                        <filter name="groupby_month" context="{'group_by' : 'date:month'}" string="Month"/>
                        <filter name="groupby_year" context="{'group_by' : 'date:year'}" string="Year"/>
                        <filter name="groupby_user_id" context="{'group_by' : 'user_id'}" string="User"/>
                        <filter name="groupby_task_id" context="{'group_by' : 'task_id'}" string="Task"/>
                        <filter name="groupby_project_id" context="{'group_by' : 'project_id'}" string="Project"/>
                    </group>
                </search>
            </field>
        </record>

        <record id="project_task_charge_action" model="ir.actions.act_window">
            <field name="name">Task charge</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">project.task.charge</field>
            <field name="view_mode">tree,pivot,graph,calendar,timeline,form</field>
        </record>

        <menuitem id="menu_project_task_charge"
                  name="Task charge"
                  action="project_task_charge_action"
                  parent="project.menu_project_report"
                  sequence="10"/>
    </data>
</openerp>