<?xml version="1.0" encoding="UTF-8"?>
<templates id="template">

    <t t-name="ProductSelection">

        <div class="jumbotron">
            <div id="big_helper" class="container">
                <h1>Création de chariot</h1>
                <p>Veuillez choisir un proprietaire</p>
            </div>
        </div>

        <div class="container">

            <table id="product_selection_table" class="table ui_stock_table table-hover">
                <tbody id="product_selection_table_body">
                    <t t-foreach="widget.ownerList" t-as="owner">
                        <tr t-att-data-owner_id="owner.id" class="owner-item ui_stock_item">
                            <td class="main-col">
                                <p>
                                    <t t-esc="owner.name"/>
                                </p>
                            </td>
                        </tr>
                    </t>
                </tbody>
            </table>
        </div>
    </t>


    <t t-name="ProductView">

        <div class="template-container">

            <div id="big_helper" class="jumbotron alert-info">

                <div class="container">
                    <h4 id="title-scan-product">Vous pouvez scanner un article ou le saisir a la main</h4>
                    <h4 id="title-scan-lot" class="hidden">Cet article est rattaché à un numéro de lot/série. Merci de scanner ce numéro ou de supprimer l'article pour continuer</h4>
                    <h4 id="title-scan-location" class="hidden">Cet article est présent à plusieurs emplacements, merci de scanner celui utilisé</h4>
                    <div id="search-input" class="input-group">
                        <input id="search-code" type="text" class="form-control" placeholder="Saisie manuelle"/>
                        <span class="input-group-btn">
                            <button id="clear-search-code" class="btn btn-danger" type="button">x</button>
                        </span>
                    </div>
                </div>
            </div>

            <div class="container">
                <div class="row">
                    <p class="button-group col-lg-12 text-right" role="group" id="mass_btn">

                    </p>

                    <div id="product-block" class="col-md-12">

                        <button type="button" id="btn_delete_all_rows" class="btn btn-danger float-right mb-3">
                            <span class="fa fa-trash"></span> Vider la liste
                        </button>

                        <table class="table table-hover ui_stock_table">
                            <thead id="product_table_header">
                                <tr>
                                    <th class="main-col">Article</th>
                                    <t t-if="widget.is_internal_move">
                                        <th class="main-col">Emplacement</th>
                                    </t>
                                    <th colspan="2">Qté</th>
                                </tr>
                            </thead>
                            <tbody id="product_table_body"/>
                        </table>
                    </div>

                    <div class="col-md-12 hidden" id="need_for_lot"/>
                </div>
            </div>
        </div>
    </t>

    <t t-name="ProductTableRow">
        <tr t-att-product_id="widget.id" id="product_row" class="js_open_numpad ui_stock_item">
            <td class="main-col">
                 <p id="product_name">
                     <t t-esc="widget.product.name"/>
                 </p>
                <p id="product_code" class="text-muted">
                    <small>Code: </small><t t-esc="widget.product.default_code"/>
                </p>
                <t t-if="widget.product.loti_id">
                 <p id="lot_name" class="text-muted">
                    <small>Lot: </small><t t-esc="widget.product.lot_name"/>
                </p>
                </t>
            </td>
            <t t-if="widget.productView.is_internal_move">
            <td>
                 <t t-if="widget.product.location_barcode">
                <p id="product_location">
                    <t t-esc="widget.product.location_barcode"/>
                </p>
                 </t>
            </td>
            </t>
             <td class="qty-col">
                <p class="product-qty">
                    <t t-esc="widget.product.quantity"/>
                </p>
            </td>
            <td>
                <button type="button" class='btn btn-danger js_delete_product fa fa-trash'/>
            </td>
        </tr>
    </t>

    <t t-name="ProductTableRow.Lot" class="hidden" id="need_for_lot_view">
        <div>
            <table id="product_lot_table" class="table">
                <thead id="product_lot_table_header">
                    <tr>
                        <th>Nom</th>
                        <th>Code</th>
                        <th>Méthode de suivi</th>
                        <th id="invalid_lot_number_header" class="hidden text-danger">Numéro de lot/série invalide</th>
                    </tr>
                </thead>
                <tbody id="product_lot_table_body">
                    <tr>
                        <td>
                            <t t-esc="widget.productRow.product.name"/>
                        </td>
                        <td>
                            <t t-esc="widget.productRow.product.default_code"/>
                        </td>
                        <td>
                            <t t-esc="widget.productRow.product.tracking"/>
                        </td>
                        <td id="invalid_lot_number_col" class="hidden text-danger">
                            <t t-esc="widget.invalid_number"/>
                        </td>
                        <td>
                            <button type="button" class='btn btn-danger js_delete_product_lot fa fa-trash'/>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </t>

    <t t-name="ProductRow.Error">
        <tr class="line-error danger">
            <td colspan="2">
                <p>
                     <t t-esc="widget.error.title"/>
                </p>
                <p class="text-muted">
                     <t t-esc="widget.error.message"/>
                </p>
            </td>
            <t t-if="widget.productView.is_internal_move">
            <td></td>
            </t>
            <td>
                <button type="button" class='btn btn-danger js_delete_product fa fa-trash'/>
            </td>
        </tr>
    </t>

</templates>
